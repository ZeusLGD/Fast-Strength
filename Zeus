local player = game.Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local function unequipAllPets()
    local petsFolder = player:WaitForChild("petsFolder")
    for _, folder in pairs(petsFolder:GetChildren()) do
        if folder:IsA("Folder") then
            for _, pet in pairs(folder:GetChildren()) do
                ReplicatedStorage.rEvents.equipPetEvent:FireServer("unequipPet", pet)
            end
        end
    end
end

local function equipUniquePet(petName)
    local petsFolder = player:WaitForChild("petsFolder")
    for _, folder in pairs(petsFolder:GetChildren()) do
        if folder:IsA("Folder") then
            for _, pet in pairs(folder:GetChildren()) do
                if pet.Name == petName then
                    ReplicatedStorage.rEvents.equipPetEvent:FireServer("equipPet", pet)
                    return
                end
            end
        end
    end
end

local isGrinding = false

Tabs.Strength:AddToggle("FastStrengthToggle", {
    Title = "Fast Strength (Need 7-8 Packs)",
    Default = false
}):OnChanged(function(state)
    if state then
        local success, err = pcall(function()
            isGrinding = true
            unequipAllPets()
            task.wait(0.2)
            equipUniquePet("Swift Samurai")
            task.wait(0.2)

            for i = 1, 23 do
                task.spawn(function()
                    while isGrinding do
                        player.muscleEvent:FireServer("rep")
                        task.wait()
                    end
                end)
            end
        end)
        if not success then
            warn("Erro ao iniciar Fast Strength:", err)
        end
    else
        isGrinding = false
        unequipAllPets()
    end
end)
